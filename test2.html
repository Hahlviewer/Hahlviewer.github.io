<!DOCTYPE html>
<style>
  body {
    overscroll-behavior-x: none;
    touch-action: pan-y;
  }
</style>

<script>
  let touchStartX = 0;
  let touchStartY = 0;
  const minSwipePercent = 0.1;
  const edgeThreshold = 30;

  // Prüft, ob gezoomt wurde
  const isZoomed = () => window.visualViewport && window.visualViewport.scale !== 1;

  function handleLeftSwipe() {
    alert("Swipe nach links");
  }

  function handleRightSwipe() {
    alert("Swipe nach rechts");
  }

  window.addEventListener('touchstart', (e) => {
    // Ausnahme 1 & 3: Zoom oder Mehrfingerberührung → ignorieren
    if (e.touches.length !== 1 || isZoomed()) {
      touchStartX = null;
      return;
    }

    const touch = e.touches[0];
    const fromEdge = touch.clientX < edgeThreshold || touch.clientX > window.innerWidth - edgeThreshold;

    // Ausnahme 2: Rand-Swipe → verhindern
    if (fromEdge) {
      e.preventDefault();
    }

    touchStartX = touch.clientX;
    touchStartY = touch.clientY;
  }, { passive: false });

  window.addEventListener('touchend', (e) => {
    // Keine gültige Startposition oder mehr als 1 Finger → abbrechen
    if (!touchStartX || e.changedTouches.length !== 1 || isZoomed()) return;

    const touch = e.changedTouches[0];
    const deltaX = touch.clientX - touchStartX;
    const deltaY = touch.clientY - touchStartY;

    // Nur horizontale Swipes auswerten
    if (Math.abs(deltaX) > Math.abs(deltaY)) {
      const swipeDistance = Math.abs(deltaX);
      const minSwipe = window.innerWidth * minSwipePercent;

      if (swipeDistance >= minSwipe) {
        if (deltaX > 0) {
          handleRightSwipe();
        } else {
          handleLeftSwipe();
        }
      }
    }

    // Reset
    touchStartX = null;
    touchStartY = null;
  });
</script>
